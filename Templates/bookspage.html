<!--
Book Page: When users click on a book from the results of the search page, they
should be taken to a book page, with details about the book: its title, author,
publication year, ISBN number, and any reviews that users have left for the book
on your website.

Review Submission: On the book page, users should be able to submit a review:
consisting of a rating on a scale of 1 to 5, as well as a text component to the
review where the user can write their opinion about a book. Users should not be
able to submit multiple reviews for the same book.

Goodreads Review Data: On your book page, you should also display (if available)
the average rating and number of ratings the work has received from Goodreads.

If the requested ISBN number isnâ€™t in your database, your website should return a 404 error.
-->


<!DOCTYPE html>

{% extends "layout.html" %}

{% block title %}
    CS50W Project 1: Books
{% endblock %}

{% block heading%}
    {{username}},  can you help us by reviewing this book?
{% endblock %}

{% block body%}
<h2> About the Book you selected: </h2>
<!--margin-left:50px; margin-right:50px; class="flex-container" -->

<div action="{{ url_for('bookspage') }}" class="flex-container" >
    <div class="row"  width="3500px" >
      <!--Book Info-->
        <div class="col-lg-4"  style="" >
            <h3 style="font-weight:bold ; padding: 15px"> You chose:</h3>
               <h4 style="padding: 15px"> Title: {{book.title}}</h4>
               <h4 style="padding: 15px"> ISBN : {{ book.isbn}} </h4>
               <h4 style="padding: 15px"> Author: {{book.author}}</h4>
               <h4 style="padding: 15px"> Year : {{ book.year}}</h4>
        </div>
      <!-- API info-->
        <div class="col-lg-4"  width="1000px"  style="background-color:#cc99ff">
            <h3 style="font-weight:bold ; padding: 15px">Book Details:</h3>
                 <h4 style="padding: 10px"> Number of reviews: {{ reviews_count }} </h4>
                 <h4 style="padding: 10px"> Number of ratings: {{ ratings_count }} </h4>
                 <h4 style="padding: 10px"> Average Rating: {{ average_rating }} </h4>
        </div>
        <!--Show other reviews for this book-->
        <div class="col-lg-4"  width="1000px"  >
        	   {% if reviews and reviews|length > 0 %}
        	     	<div class="form-group">
        		  	<table class="table">
        				<thead>
        					<tr>
        						<th scope="col">Rating </th>
          					<th scope="col">Review</th>
                  </tr>
        				</thead>
        			  {% for review in reviews %}
        					<tr>
        						<td>{{ review.rating }}</td>
        						<td>{{ review.review }}</td>
        			    </tr>
        		   	{% endfor %}
                {%else%}
                     <p style="padding:20px"> There are no reviews for this book. </p>
                {%endif%}
        			  </table>
    </div>
</div>




<p></p>
<div  class="flex-container" style="padding:20px">
    <div class="row">
        <div class="col-7 ">.
           <form class="form-group" action="{{ url_for('bookspage') }}" method="post" >
            <label for="mybox">  <h2>Your Review:</h2>   </label>
            <textarea class="form-control" id="Newreview" name="Newreview" value="Newreview" rows="10"  style="width:100%" placeholder=" Please share your opinion here" required>
            </textarea>
          </form>
        </div>
        <div class="col-5 " style="padding:30px">
            <form class="form-inline" action="{{ url_for('bookspage') }}" method="post"  >
               <div class="container">
                     <h4> From 1 to 5 how much did you like the book? </h4>
                     <input class="form-control" name="rating" id="rating" value="rating" placeholder="1 I Hated! - 5 I loved it!" style="width:100%" required>
                     <button type="submit" class="btn btn-primary" style="background-color:#400080; width:100%"   >Post</button>

              </div>
            </form>
        </div>
  </div>

    <p>  {{message_salvar_alterar}}</p>

    </div>
  </div>
</div>

{% endblock %}
